
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Telegram WebApp Debug</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            font-family: sans-serif;
            background: #f2f2f2;
            padding: 30px;
            text-align: center;
        }
        pre {
            background: #fff;
            padding: 15px;
            border: 1px solid #ccc;
            text-align: left;
            white-space: pre-wrap;
            word-break: break-word;
        }
        button {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <h2>Telegram WebApp Debug Page</h2>
    <p>Use this page to test if <code>Telegram.WebApp.sendData()</code> is triggered correctly.</p>

    <pre id="log">Waiting for interaction...</pre>

    <button onclick="testSend()">Send Test Data</button>

    <script>
        const log = document.getElementById("log");

        function logMessage(msg) {
            log.textContent += "\n" + msg;
        }

        function testSend() {
            logMessage("üü¢ Triggering sendData...");
            if (window.Telegram && window.Telegram.WebApp) {
                Telegram.WebApp.ready();
                const testData = {
                    session: "debug_session_" + Date.now(),
                    status: "testing sendData",
                    timestamp: new Date().toISOString()
                };
                logMessage("üì§ Data: " + JSON.stringify(testData));
                Telegram.WebApp.sendData(JSON.stringify(testData));
                logMessage("‚úÖ sendData called.");

                setTimeout(() => {
                    logMessage("üîö Closing WebApp...");
                    Telegram.WebApp.close();
                }, 2000);
            } else {
                logMessage("‚ùå Telegram.WebApp not available.");
                alert("Telegram.WebApp not available. Are you inside Telegram?");
            }
        }
    </script>
</body>
</html>
